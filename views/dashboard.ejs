<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bot Dashboard</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>

<body class="bg-light">

  <div class="container mt-5">
    <h1 class="mb-4 fw-bold">Bot Dashboard</h1>

    <div class="row">
      <% bots.forEach(bot => { %>
        <div class="col-md-4 mb-4">
          <div class="card shadow-sm border-0">
            <div class="card-body">

              <h4 class="card-title fw-semibold"><%= bot.client_name %></h4>

              <!-- LICENSE KEY -->
              <p class="text-muted mb-1">
                License:
                <span class="text-primary fw-semibold"><%= bot.licenseKey %></span>
              </p>

              <!-- APPROVAL -->
              <p class="mb-3">
                Status:
                <% if(bot.approved) { %>
                  <span class="badge bg-success">Approved</span>
                <% } else { %>
                  <span class="badge bg-danger">Not Approved</span>
                <% } %>
              </p>

              <a href="/dashboard/bot/<%= bot.token %>" class="btn btn-primary btn-sm w-100 mb-2">
                View Details
              </a>

              <% if (!bot.approved) { %>
                <form action="/dashboard/approve" method="POST">
                  <input type="hidden" name="token" value="<%= bot.token %>">
                  <button class="btn btn-success btn-sm w-100">Approve</button>
                </form>
              <% } else { %>
                <form action="/dashboard/unapprove" method="POST">
                  <input type="hidden" name="token" value="<%= bot.token %>">
                  <button class="btn btn-danger btn-sm w-100">Remove Approval</button>
                </form>
              <% } %>

            </div>
          </div>
        </div>
      <% }) %>
    </div>
  </div>

</body>
</html>
